<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Saved My Life</title>
    <style>
        body {
            background-color: black;
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Helvetica, sans-serif;
            font-weight: bold;
            text-align: center;
        }
        .main-text {
            font-size: 3em;
            margin-bottom: 20px;
        }
        .circle {
            position: relative;
            width: 300px;
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* Added overflow:hidden to hide overflowing text */
        }

        .circle img {
            max-width: 100%;
            max-height: 100%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            animation: rotateText 20s linear infinite; /* Added animation for rotation */
        }
        text {
            fill: white;
            font-size: 12px;
            font-weight: bold;
            font-family: Helvetica, sans-serif;
        }

        @keyframes rotateText {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <div class="main-text">[ MUSiC SAVED MY LiFE ]</div>
    <div class="circle">
        <img src="/assets/HIMALOGO.PNG" alt="Music Saved My Life Icon" style="height: 50%; width: auto;">
        <svg viewBox="0 0 300 300">
            <defs>
                <path id="circlePath" d="M150,150 m-140,0 a140,140 0 1,1 280,0 a140,140 0 1,1 -280,0"/>
            </defs>
            <text>
                <textPath href="#circlePath" startOffset="0">
                    MUSIC SAVED ME FROM FALLING TO SADNESS. FOR THAT I AM FOREVER GRATEFUL. THANK YOU. MUSIC SAVED MY HEART AND MY SOUL.
                </textPath>
            </text>
        </svg>
    </div>
</body>

<script type="text/javascript" async>
window['libopenmpt'] = {};
libopenmpt.locateFile = function (filename) {
  return "/chiptune2js/" + filename;
};

libopenmpt.onRuntimeInitialized = function () {
  var player = new ChiptuneJsPlayer(new ChiptuneJsConfig(-1, 50, 1)); // Adjust stereoSeparation and interpolationFilter here

  function playModTrack(modUrl) {
    player.load(modUrl, function(buffer) {
      player.play(buffer);

      // Loop the track when it ends
      player.onEnded(function() {
        player.play(buffer);
      });
    });
  }

  function resumeAudioContext() {
    if (player.context.state === 'suspended') {
      return player.context.resume();
    }
    return Promise.resolve();
  }

  // Function to handle the first user interaction
  function onFirstInteraction() {
    resumeAudioContext().then(() => {
      playModTrack('/modfiles/BITTERSWEETPOETRY.xm');
    });

    // Remove the event listeners after the first interaction
    window.removeEventListener('click', onFirstInteraction);
    window.removeEventListener('touchstart', onFirstInteraction);
  }

  // Detect if the browser is Chrome
  var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);

  if (isChrome) {
    // Attach event listeners for mouse movement and touch input
    window.addEventListener('mousemove', onFirstInteraction, { once: true });
    window.addEventListener('touchstart', onFirstInteraction, { once: true });
  } else {
    // For non-Chrome browsers, use click or touchstart
    window.addEventListener('click', onFirstInteraction, { once: true });
    window.addEventListener('touchstart', onFirstInteraction, { once: true });
  }
};
</script>
<script type="text/javascript" src="/chiptune2js/libopenmpt.js" async></script>
<script type="text/javascript" src="/chiptune2js/chiptune2.js" async></script>

</html>
